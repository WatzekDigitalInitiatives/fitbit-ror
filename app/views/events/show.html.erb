<div class="container">
  <div class="row">
     <div class="col s12">
       <div class="card medium event">
         <div class="card-image">
            <% if @event.avatar? %>
            <%= image_tag @event.avatar.url(:preview), :style => 'width: 100%;' %>
            <% else %>
            <%= image_tag @event.static_map_preview %>
            <% end %>
        </div>
        <div class="card-content">
          <span class="card-title grey-text text-darken-4"><%= @event.name %></span>
          <div class="event-info">
            <br/>
            <b>Dates: </b><%= @event.start_date %> to <%= @event.finish_date %>
            <br/>
            <br/>
            <b>Route: </b><%= @event.start_location %> to <%= @event.end_location %></li>
          </div>
        </div>
        </div>
     </div>

   <div class="col s3 offset-s4">
      <input id="fetch-date" type="date" class="datepicker" placeholder="Select a date to get data from">
   </div>
   <div class="col s3">
     <% url = "/events/"+@event.id.to_s %>
      <a id="fetch-date-button" href=<%= url %> class="waves-effect waves-light btn">Fetch Data</a>
   </div>

   <%= render 'date_selector_js' %>

 </div>
</div>

<% if @event.team_event %>
  <%= render :partial=>"events/team_show_page" %>
<% else %>
  <%= render :partial=>"events/individual_show_page" %>
<% end %>


<%= link_to 'Back', events_path %>
|
<%= link_to 'Dashboard', dashboard_path %>

<% if current_user.present? && current_user.id == @event.createdby %>
|
<%= link_to 'Edit', edit_event_path(@event) %>
<% end %>

<%= javascript_include_tag 'https://maps.googleapis.com/maps/api/js?key='+ENV['GOOGLE_API_KEY']+'&callback=initializeShow', defer:true, async:true %>
